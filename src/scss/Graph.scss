.graph {
  display: grid;
  grid-template-areas: 
    ". months"
    "weeks posts";
  grid-template-columns: auto 1fr;
  
  &--vertical {
    grid-template-areas: 
    ". weeks"
    "months posts";
  }

  &__months {
    grid-area: months;
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    .graph--vertical & {
      grid-template-columns: auto;
    }
  }

  &__month {
    padding: .25em 0;
    &:nth-child(odd) {
      visibility: hidden;
    }
    .graph--vertical & {
      padding: 0 .25em;
      writing-mode: vertical-lr;
    }
  }

  &__weeks {
    grid-area: weeks;
    display: grid;
    grid-template-rows: repeat(5, auto);
    .graph--vertical & {
      grid-template-rows: repeat(1, auto);
      grid-template-columns: repeat(5, 1fr);
    }
  }

  &__week {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: .25em;
    &:nth-child(odd) {
      visibility: hidden;
    }
  }

  &__posts {
    grid-area: posts;
    display: grid;
    grid-gap: 1px;
    grid-template-columns: repeat(12, 1fr);
    grid-template-rows: repeat(5, auto);
    grid-auto-flow: column;
    .graph--vertical & {
      grid-template-columns: repeat(5, 1fr);
      grid-template-rows: repeat(12, auto);
      grid-auto-flow: row;
    }
  }

  &__post {
    position: relative;
    width: 100%;
    padding-top: 100%;
    overflow: hidden;
    &::before {
      content: '';
      position: absolute;
      z-index: -1;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: block;
      background: #dadada;
    }
    &:focus {
      animation: focus 1s ease-out infinite;
      z-index: 1;
    }
    &--0 {
      &:focus {
        animation: none;
        outline: none;
      }
    }
    &--none {
      visibility: hidden;
    }
  }

  &__post-label {
    text-indent: -9999px;
    position: absolute;
    top: 0;
    left: 0;
    display: block;
    width: 100%;
    height: 100%;
    overflow: hidden;

    $base: #006994;
    $animation: show .25s ease-out forwards;
    .graph__post--1 & {
      animation: $animation;
      background: desaturate($base, 0%);
    }
    .graph__post--2 & {
      animation: $animation;
      background: desaturate($base, 25%);
    }
    .graph__post--3 & {
      animation: $animation;
      background: desaturate($base, 50%);
    }
    .graph__post--4 & {
      animation: $animation;
      background: desaturate($base, 75%);
    }
  }
}

@keyframes show {
  from {
    transform: scale3d(0, 0, 0) rotate3d(0,0,1,90deg);
  }

  to {
    transform: scale3d(1, 1, 1) rotate3d(0,0,1,0);
  }
}

@keyframes focus {
  0% {
    transform: scale3d(1, 1, 1);
  }

  20% {
    transform: scale3d(1.1, 1.1, 1.1);
  }

  40%,100% {
    transform: scale3d(1, 1, 1);
  }
}